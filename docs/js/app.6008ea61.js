(function(t){function e(e){for(var o,l,s=e[0],r=e[1],d=e[2],p=0,u=[];p<s.length;p++)l=s[p],n[l]&&u.push(n[l][0]),n[l]=0;for(o in r)Object.prototype.hasOwnProperty.call(r,o)&&(t[o]=r[o]);c&&c(e);while(u.length)u.shift()();return i.push.apply(i,d||[]),a()}function a(){for(var t,e=0;e<i.length;e++){for(var a=i[e],o=!0,s=1;s<a.length;s++){var r=a[s];0!==n[r]&&(o=!1)}o&&(i.splice(e--,1),t=l(l.s=a[0]))}return t}var o={},n={app:0},i=[];function l(e){if(o[e])return o[e].exports;var a=o[e]={i:e,l:!1,exports:{}};return t[e].call(a.exports,a,a.exports,l),a.l=!0,a.exports}l.m=t,l.c=o,l.d=function(t,e,a){l.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:a})},l.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},l.t=function(t,e){if(1&e&&(t=l(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var a=Object.create(null);if(l.r(a),Object.defineProperty(a,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var o in t)l.d(a,o,function(e){return t[e]}.bind(null,o));return a},l.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return l.d(e,"a",e),e},l.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},l.p="";var s=window["webpackJsonp"]=window["webpackJsonp"]||[],r=s.push.bind(s);s.push=e,s=s.slice();for(var d=0;d<s.length;d++)e(s[d]);var c=r;i.push([0,"chunk-vendors"]),a()})({0:function(t,e,a){t.exports=a("56d7")},"08e5":function(t,e,a){},"25ff":function(t,e,a){t.exports=a.p+"img/分叉节点.997e790b.svg"},"56d7":function(t,e,a){"use strict";a.r(e);a("cadf"),a("551c"),a("097d");var o=a("2b0e"),n=a("5c96"),i=a.n(n),l=(a("0fae"),function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{attrs:{id:"app"}},[a("Flow",{attrs:{msg:"Welcome to Your Vue.js App"}})],1)}),s=[],r=function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("div",{staticClass:"editor"},[o("div",{staticClass:"top-container"},[o("div",{ref:"toolbar",staticClass:"toolbar"},[o("i",{staticClass:"command iconfont icon-undo",attrs:{"data-command":"undo",title:"撤销"}}),o("i",{staticClass:"command iconfont icon-redo disable",attrs:{"data-command":"redo",title:"重做"}}),o("span",{staticClass:"separator"}),o("i",{staticClass:"command iconfont icon-copy-o",attrs:{"data-command":"copy",title:"复制"}}),o("i",{staticClass:"command iconfont icon-paster-o disable",attrs:{"data-command":"paste",title:"粘贴"}}),o("i",{staticClass:"command iconfont icon-delete-o",attrs:{"data-command":"delete",title:"删除"}}),o("span",{staticClass:"separator"}),o("i",{staticClass:"command iconfont icon-zoom-in-o",attrs:{"data-command":"zoomIn",title:"放大"}}),o("i",{staticClass:"command iconfont icon-zoom-out-o",attrs:{"data-command":"zoomOut",title:"缩小"}}),o("i",{staticClass:"command iconfont icon-fit",attrs:{"data-command":"autoZoom",title:"适应画布"}}),o("i",{staticClass:"command iconfont icon-actual-size-o",attrs:{"data-command":"resetZoom",title:"实际尺寸"}}),o("span",{staticClass:"separator"}),o("i",{staticClass:"command iconfont icon-to-back",attrs:{"data-command":"toBack",title:"层级后置"}}),o("i",{staticClass:"command iconfont icon-to-front",attrs:{"data-command":"toFront",title:"层级前置"}}),o("span",{staticClass:"separator"}),o("i",{staticClass:"command iconfont icon-select",attrs:{"data-command":"multiSelect",title:"多选"}})]),o("div",{staticClass:"data-opt"},[o("el-button",{attrs:{size:"mini",type:"primary"},on:{click:t.saveFlow}},[t._v("保存")]),o("el-button",{attrs:{size:"mini",type:"primary"},on:{click:t.downloadFlow}},[t._v("下载")])],1)]),o("div",{staticClass:"bottom-container"},[o("div",{staticClass:"left-pannel"},[o("div",{ref:"itempannel",staticClass:"itempannel-container"},[o("img",{staticClass:"getItem",attrs:{draggable:"false",src:a("f297"),"data-type":"node","data-shape":"flow-circle","data-size":"72*72","data-color":"#FA8C16","data-label":"起止节点"}}),o("img",{staticClass:"getItem",attrs:{draggable:"false",src:a("76cb"),"data-type":"node","data-shape":"flow-rect","data-size":"80*48","data-color":"#1890FF","data-label":"常规节点"}}),o("img",{staticClass:"getItem",attrs:{draggable:"false",src:a("25ff"),"data-type":"node","data-shape":"flow-rhombus","data-size":"80*72","data-color":"#13C2C2","data-label":"分叉节点"}}),o("img",{staticClass:"getItem",attrs:{draggable:"false",src:a("d631"),"data-type":"node","data-shape":"flow-capsule","data-size":"80*48","data-color":"#722ED1","data-label":"模型节点"}})])]),o("div",{staticClass:"center-pannel"},[o("div",{ref:"flow",staticClass:"flow"}),o("div",{ref:"contextmenu",staticClass:"contextmenu",staticStyle:{position:"absolute","z-index":"2"}},[t._m(0),t._m(1),t._m(2),t._m(3),t._m(4)])]),o("div",{staticClass:"right-pannel"},[o("div",{staticClass:"detail-pannel"},[o("div",{ref:"detailpannel"},[o("div",{staticClass:"pannel",staticStyle:{display:"none"},attrs:{"data-status":"node-selected"}},[o("div",{staticClass:"pannel-title"},[t._v("节点")]),o("div",{staticClass:"block-container"},[o("div",{staticClass:"p name"},[t._v("名称：\n                "),o("el-input",{attrs:{size:"mini"},model:{value:t.nodeName,callback:function(e){t.nodeName=e},expression:"nodeName"}})],1),o("div",{staticClass:"p size"},[t._v("尺寸：\n                "),o("el-input",{attrs:{size:"mini"},model:{value:t.nodeWidth,callback:function(e){t.nodeWidth=e},expression:"nodeWidth"}}),o("el-input",{attrs:{size:"mini"},model:{value:t.nodeHeight,callback:function(e){t.nodeHeight=e},expression:"nodeHeight"}})],1),o("div",{staticClass:"p color"},[t._v("颜色：\n                "),o("el-color-picker",{attrs:{size:"mini"},model:{value:t.nodeColor,callback:function(e){t.nodeColor=e},expression:"nodeColor"}})],1)])]),o("div",{staticClass:"pannel",staticStyle:{display:"none"},attrs:{"data-status":"edge-selected",id:"edge_detailpannel"}},[o("div",{staticClass:"pannel-title"},[t._v("边")]),o("div",{staticClass:"block-container"},[o("div",{staticClass:"p name"},[t._v("名称：\n                "),o("el-input",{attrs:{size:"mini"},model:{value:t.edgeName,callback:function(e){t.edgeName=e},expression:"edgeName"}})],1)])]),o("div",{staticClass:"pannel",staticStyle:{display:"none"},attrs:{"data-status":"group-selected",id:"group_detailpannel"}},[o("div",{staticClass:"pannel-title"},[t._v("组")]),o("div",{staticClass:"block-container"},[o("div",{staticClass:"p name"},[t._v("名称：\n                "),o("el-input",{attrs:{size:"mini"},model:{value:t.groupName,callback:function(e){t.groupName=e},expression:"groupName"}})],1),o("div",{staticClass:"p color"},[t._v("颜色：\n                "),o("el-color-picker",{attrs:{size:"mini"},model:{value:t.groupColor,callback:function(e){t.groupColor=e},expression:"groupColor"}})],1)])]),o("div",{staticClass:"pannel",staticStyle:{display:"none"},attrs:{"data-status":"canvas-selected",id:"canvas_detailpannel"}},[o("div",{staticClass:"pannel-title"},[t._v("画布")]),o("div",{staticClass:"block-container"},[o("el-checkbox",{model:{value:t.gridCheck,callback:function(e){t.gridCheck=e},expression:"gridCheck"}},[t._v("网格对齐")])],1)]),o("div",{staticClass:"pannel",staticStyle:{display:"block"},attrs:{"data-status":"multi-selected",id:"multi_detailpannel"}},[o("div",{staticClass:"pannel-title"},[t._v("多选")]),o("div",{staticClass:"block-container"},[o("div",{staticClass:"p color"},[t._v("颜色：\n                "),o("el-color-picker",{attrs:{size:"mini"},model:{value:t.multiColor,callback:function(e){t.multiColor=e},expression:"multiColor"}})],1)])])])]),o("div",{staticClass:"navigator"},[o("span",{staticClass:"pannel-title"},[t._v("导航器")]),o("div",{ref:"minimap",staticClass:"mini-map"})]),o("div",{staticClass:"zoom-slider"},[o("el-slider",{attrs:{"show-input":"","input-size":"mini",max:200,"format-tooltip":t.formatTooltip},model:{value:t.zoomRatio,callback:function(e){t.zoomRatio=e},expression:"zoomRatio"}})],1)])])])},d=[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"menu",staticStyle:{display:"none"},attrs:{"data-status":"node-selected"}},[a("div",{staticClass:"command disable",attrs:{"data-command":"copy"}},[a("span",[t._v("复制")])]),a("div",{staticClass:"command disable",attrs:{"data-command":"delete"}},[a("span",[t._v("删除")])])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"menu",staticStyle:{display:"none"},attrs:{"data-status":"edge-selected"}},[a("div",{staticClass:"command disable",attrs:{"data-command":"delete"}},[a("span",[t._v("删除")])])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"menu",staticStyle:{display:"none"},attrs:{"data-status":"group-selected"}},[a("div",{staticClass:"command disable",attrs:{"data-command":"copy"}},[a("span",[t._v("复制")])]),a("div",{staticClass:"command disable",attrs:{"data-command":"delete"}},[a("span",[t._v("删除")])]),a("div",{staticClass:"command disable",attrs:{"data-command":"unGroup"}},[a("span",[t._v("解组")])])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"menu",staticStyle:{display:"block"},attrs:{"data-status":"canvas-selected"}},[a("div",{staticClass:"command disable",attrs:{"data-command":"undo"}},[a("span",[t._v("撤销")])]),a("div",{staticClass:"command disable",attrs:{"data-command":"redo"}},[a("span",[t._v("重做")])]),a("div",{staticClass:"command disable",attrs:{"data-command":"pasteHere"}},[a("span",[t._v("粘贴")])])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"menu",staticStyle:{display:"none"},attrs:{"data-status":"multi-selected"}},[a("div",{staticClass:"command disable",attrs:{"data-command":"copy"}},[a("span",[t._v("复制")])]),a("div",{staticClass:"command disable",attrs:{"data-command":"paste"}},[a("span",[t._v("粘贴")])]),a("div",{staticClass:"command disable",attrs:{"data-command":"delete"}},[a("span",[t._v("删除")]),a("span",[t._v("delete")])])])}],c=(a("6b54"),a("4917"),a("a481"),a("28a5"),a("3835")),p=(a("7f7f"),a("ac6a"),a("1688")),u=a.n(p),m=a("9818"),f=a("e511"),g=a.n(f),h=(a("08e5"),{name:"Flow",components:{},data:function(){return{page:null,flow:null,graph:null,nodeId:null,nodeName:null,nodeWidth:null,nodeHeight:null,nodeColor:null,groupId:null,groupName:null,groupColor:null,edgeId:null,edgeName:null,multiId:[],multiColor:null,isMultiSelect:!1,gridCheck:!1,zoomRatio:100}},mounted:function(){this.initEditor()},watch:{nodeName:function(t){this.flow.update(this.nodeId,{label:t})},nodeWidth:function(t){this.flow.update(this.nodeId,{size:"".concat(t,"*").concat(this.nodeHeight)})},nodeHeight:function(t){this.flow.update(this.nodeId,{size:"".concat(this.nodeWidth,"*").concat(t)})},multiColor:function(t){var e=this;this.multiId.forEach(function(a){e.flow.update(a,{color:t})})},nodeColor:function(t,e){null!==e&&this.flow.update(this.nodeId,{color:t})},edgeName:function(t){null!==t&&this.flow.update(this.edgeId,{label:{text:t}})},groupName:function(t){null!==t&&this.flow.update(this.groupId,{label:t})},groupColor:function(t){null!==t&&this.flow.update(this.groupId,{color:t})},gridCheck:function(t){t?this.page.showGrid():this.page.hideGrid()},zoomRatio:function(t){this.graph.zoom(t/100)}},methods:{initEditor:function(){var t=this,e=new u.a;u.a.track(!1),this.flow=new u.a.Flow({graph:{container:this.$refs.flow},align:{grid:!0},grid:{cell:20},shortcut:{zoomIn:!0,zoomOut:!0}}),this.itempannel=new u.a.Itempannel({container:this.$refs.itempannel}),this.minimap=new u.a.Minimap({container:this.$refs.minimap}),this.toolbar=new u.a.Toolbar({container:this.$refs.toolbar}),this.contextmenu=new u.a.Contextmenu({container:this.$refs.contextmenu}),this.detailpannel=new u.a.Detailpannel({container:this.$refs.detailpannel}),e.add(this.flow),e.add(this.itempannel),e.add(this.minimap),e.add(this.toolbar),e.add(this.contextmenu),e.add(this.detailpannel);var a=this.$refs.flow.childNodes[0].childNodes[0],o=1.5,n=window.devicePixelRatio&&window.devicePixelRatio>=o?window.devicePixelRatio:o,i=a.getBoundingClientRect();a.width=i.width*n,a.height=i.height*n;var l=a.getContext("2d");l.scale(n,n),e.on("aftercommandexecute",function(e){switch(e.command.name){case"multiSelect":t.multiId=[],t.isMultiSelect=!0;break;case"undo":t.isMultiSelect=!1;break;default:break}}),this.flow.read(m),this.graph=this.flow.getGraph(),this.graph.setFitView("cc"),this.graph.edge({style:{stroke:"#79838e"},shape:"flow-polyline-round",labelRectStyle:{fill:"#ffffff"}}),this.page=e.getCurrentPage(),this.page.hideGrid(),this.page.changeAddEdgeModel({shape:"flow-polyline-round"}),this.page.on("afteritemselected",function(e){switch(e.item.type){case"node":if(t.isMultiSelect)t.multiId.push(e.item.model.id),t.multiColor=e.item.model.color;else{t.nodeId=e.item.model.id,t.nodeName=e.item.model.label;var a=e.item.model.size.split("*"),o=Object(c["a"])(a,2);t.nodeWidth=o[0],t.nodeHeight=o[1],t.nodeColor=e.item.model.color}console.log(t.multiId);break;case"edge":t.edgeId=e.item.model.id,t.edgeName=e.item.model.label?e.item.model.label.text:null;break;case"group":t.groupId=e.item.model.id,t.groupName=e.item.model.label?e.item.model.label:null,t.groupColor=e.item.model.color?e.item.model.color:"#f2f4f5";break;default:break}}),this.page.on("beforeitemunselected",function(){t.isMultiSelect=!1}),this.graph.on("afterchangesize",function(){t.graph.update()})},getDarkColor:function(t,e){for(var a=this.HexToRgb(t),o=0;o<3;o++)a[o]=Math.floor(a[o]*(1-e));return this.RgbToHex(a[0],a[1],a[2])},getLightColor:function(t,e){for(var a=this.HexToRgb(t),o=0;o<3;o++)a[o]=Math.floor((255-a[o])*e+a[o]);return this.RgbToHex(a[0],a[1],a[2])},HexToRgb:function(t){for(var e=t.replace("#",""),a=e.match(/../g),o=0;o<3;o++)a[o]=parseInt(a[o],16);return a},RgbToHex:function(t,e,a){for(var o=[t.toString(16),e.toString(16),a.toString(16)],n=0;n<3;n++)1===o[n].length&&(o[n]="0".concat(o[n]));return"#".concat(o.join(""))},saveFlow:function(){var t=this.flow.save();console.log(t),this.$message({message:"数据保存成功！",type:"success"})},downloadFlow:function(){this.page.hideGrid(),this.graph.setFitView("cc");var t=this.$refs.flow.childNodes[0].childNodes[0],e=t.toDataURL("image/png"),a=new g.a({orientation:"l",unit:"pt",format:"a4"}),o=840.51;a.addImage(e,"PNG",0,0,o,o/t.width*t.height,"","FAST"),a.save("download.pdf")},formatTooltip:function(t){return"".concat(t,"%")}}}),v=h,b=(a("cd53"),a("2877")),y=Object(b["a"])(v,r,d,!1,null,"11b2fa64",null);y.options.__file="Flow.vue";var C=y.exports,x={name:"app",components:{Flow:C}},w=x,_=(a("5c0b"),Object(b["a"])(w,l,s,!1,null,null,null));_.options.__file="App.vue";var k=_.exports;o["default"].config.productionTip=!1,o["default"].use(i.a),new o["default"]({render:function(t){return t(k)}}).$mount("#app")},"5c0b":function(t,e,a){"use strict";var o=a("5e27"),n=a.n(o);n.a},"5e27":function(t,e,a){},"76cb":function(t,e,a){t.exports=a.p+"img/常规节点.8077133c.svg"},"88e6":function(t,e,a){},9818:function(t){t.exports={nodes:[{id:"node1",x:50,y:100,color:"#1890FF",size:"80*48",shape:"rect",label:"文本标签1",parent:"group1",index:1},{id:"node2",x:50,y:200,color:"#1890FF",size:"80*48",shape:"rect",label:"文本标签2",parent:"group1",index:1},{id:"node3",x:50,y:300,color:"#1890FF",size:"80*48",shape:"rect",label:"文本标签3",parent:"group1",index:1},{id:"node4",x:200,y:150,color:"#1890FF",size:"80*48",shape:"rect",label:"文本标签4",parent:"group1",index:1},{id:"node5",x:200,y:250,color:"#1890FF",size:"80*48",shape:"rect",label:"文本标签5",parent:"group1",index:1},{id:"node6",x:350,y:150,color:"#1890FF",size:"80*48",shape:"rect",label:"文本标签6",parent:"group1",index:1},{id:"node7",x:350,y:250,color:"#1890FF",size:"80*48",shape:"rect",label:"文本标签7",parent:"group1",index:1},{id:"node8",x:500,y:50,color:"#1890FF",size:"80*48",shape:"rect",label:"文本标签8",parent:"group1",index:1},{id:"node9",x:500,y:150,color:"#1890FF",size:"80*48",shape:"rect",label:"文本标签9",parent:"group1",index:1},{id:"node10",x:500,y:250,color:"#1890FF",size:"80*48",shape:"rect",label:"文本标签10",parent:"group1",index:1},{id:"node11",x:500,y:350,color:"#1890FF",size:"80*48",shape:"rect",label:"文本标签11",parent:"group1",index:1}],edges:[{id:"edge1",source:"node1",target:"node4",controlPoints:[{x:10,y:10}],sourceAnchor:1,targetAnchor:3,shape:"flow-polyline-round",style:{stroke:"#79838e"},labelRectStyle:{fill:"#515759"},parent:"group1",index:1},{id:"edge2",source:"node2",target:"node4",controlPoints:[{x:10,y:10}],sourceAnchor:1,targetAnchor:3,shape:"flow-polyline-round",style:{stroke:"#79838e"},labelRectStyle:{fill:"#515759"},parent:"group1",index:1},{id:"edge3",source:"node2",target:"node5",controlPoints:[{x:10,y:10}],sourceAnchor:1,targetAnchor:3,shape:"flow-polyline-round",style:{stroke:"#79838e"},labelRectStyle:{fill:"#515759"},parent:"group1",index:1},{id:"edge4",source:"node3",target:"node5",controlPoints:[{x:10,y:10}],sourceAnchor:1,targetAnchor:3,shape:"flow-polyline-round",style:{stroke:"#79838e"},labelRectStyle:{fill:"#515759"},parent:"group1",index:1},{id:"edge5",source:"node4",target:"node6",controlPoints:[{x:10,y:10}],sourceAnchor:1,targetAnchor:3,shape:"flow-polyline-round",style:{stroke:"#79838e"},labelRectStyle:{fill:"#515759"},parent:"group1",index:1},{id:"edge6",source:"node5",target:"node7",controlPoints:[{x:10,y:10}],sourceAnchor:1,targetAnchor:3,shape:"flow-polyline-round",style:{stroke:"#79838e"},labelRectStyle:{fill:"#515759"},parent:"group1",index:1},{id:"edge7",source:"node6",target:"node9",controlPoints:[{x:10,y:10}],sourceAnchor:1,targetAnchor:3,shape:"flow-polyline-round",style:{stroke:"#79838e"},labelRectStyle:{fill:"#515759"},parent:"group1",index:1},{id:"edge8",source:"node7",target:"node10",controlPoints:[{x:10,y:10}],sourceAnchor:1,targetAnchor:3,shape:"flow-polyline-round",style:{stroke:"#79838e"},labelRectStyle:{fill:"#515759"},parent:"group1",index:1},{id:"edge9",source:"node8",target:"node9",controlPoints:[{x:10,y:10}],sourceAnchor:2,targetAnchor:0,shape:"flow-polyline-round",style:{stroke:"#79838e"},labelRectStyle:{fill:"#515759"},parent:"group1",index:1},{id:"edge10",source:"node9",target:"node10",controlPoints:[{x:10,y:10}],sourceAnchor:2,targetAnchor:0,shape:"flow-polyline-round",style:{stroke:"#79838e"},labelRectStyle:{fill:"#515759"},parent:"group1",index:1},{id:"edge11",source:"node10",target:"node11",controlPoints:[{x:100,y:100}],sourceAnchor:2,targetAnchor:0,shape:"flow-polyline-round",style:{stroke:"#79838e"},labelRectStyle:{fill:"#ffffff"},label:{text:"边名称"},parent:"group1",index:1}]}},cd53:function(t,e,a){"use strict";var o=a("88e6"),n=a.n(o);n.a},d631:function(t,e,a){t.exports=a.p+"img/模型节点.f3e2f7ce.svg"},f297:function(t,e,a){t.exports=a.p+"img/起止节点.b3897829.svg"}});
//# sourceMappingURL=app.6008ea61.js.map